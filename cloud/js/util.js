define(["jquery","template","artDialog","solazy"],function(e,t){var i={debug:!0,loginStat:!1,yht_server:"euc.yonyoucloud.com",init:function(){var t=this;t.fixBug(),t.initNavTab(),t.bindEvent(),t.HeadTab(),t.getBaiduStatic(),t.bindWidget(),t.getUserData(),t.toTaste(),e(".footer").soLazy()},log:function(e){this.debug},toTaste:function(){e(".explink").on("click",function(){if(-1!=window.document.cookie.indexOf("at"))return function(){return _ya.push(["_trackEvent","zixunbtn","click",e(".explink").attr("data-id"),"立即体验"]),e.ajax({type:"get",async:!1,url:"/market/experience/verifyMobile?userId="+getCookie("yonyou_uid"),dataType:"json",data:"",success:function(t){1==t.status&&(1==t.login?0==t.combined?(e(".pop").show(),e(".pop").html('您的手机号未绑定，<a href="https://euc.yonyoucloud.com/usercenter/usermng" class="tobinded">去绑定</a><span class="pop-close">×</span>'),e("body").delegate(".pop-close","click",function(){e(".pop").hide()}),e.a=!1):1==t.combined&&(e.a=!0):0==t.login&&(e(".pop").show(),e(".pop").html("您尚未登录，请登录。"),e(".pop").delay(3e3).fadeOut(),e.a=!1))}}),e.a}();var t=window.location.href,i=that.URLencode(t);return window.location.href="/market/jump.jsp?target="+i,!1})},fixBug:function(){e(".client-display-img img").wrap('<div class="img-middle"></div>'),e(".J_SearchText").size()},bindEvent:function(){var t=this;e(".inputcontrol").click(function(){var i,n,o;o=e.trim(e(this).parent().find(".inputContent").val()),i="localhost"==window.location.hostname?"/cloud/src/html/searchList.html?keyword=":"/searchList.html?keyword=",n=t.IETester(),window.location.href=n?i+encodeURIComponent(o):i+o}),e(".inputContent").keydown(function(i){var n,o;if(13==i.which){var a=e.trim(e(this).val());n="localhost"==window.location.hostname?"/cloud/src/html/searchList.html?keyword=":"/searchList.html?keyword=",o=t.IETester(),window.location.href=o?n+encodeURIComponent(a):n+a}}),e(window).scroll(function(){var t=e(window).scrollTop();e(window).height();0!=t?e(".backtop , .hide-backtop").addClass("active"):e(".backtop , .hide-backtop").removeClass("active")}),e(".backtop , .hide-backtop").on("click",function(){document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e("html,body").animate({scrollTop:"0px"})});var i=window.location.href;e(".btn-logo").click(function(){var e=t.URLencode(i);window.location.href="/market/jump.jsp?target="+e}),e(".btn-register").click(function(){var e=t.URLencode(i);window.location.href="/market/register?service="+e}),e(".reg-have-invite").on("click",function(){window.location.href="/polite.html"}),e(".btn-foot-register").click(function(){var e=t.URLencode(i);window.location.href="/market/register?service="+e}),e(".btn-leave").click(function(){window.location.href="//"+t.yht_server+"/cas/logout?_eventId=next&service="+encodeURIComponent(window.location.protocol+"//"+window.location.host)}),e(".supplier_link.notlogin").click(function(){e(".btn-logo").trigger("click")})},getUserData:function(){if(that=this,that.getUserCount++,document.cookie.length>0){var t=that.getCookie("yonyou_uid"),i=that.getCookie("yonyou_uname");t&&i?(that.loginStat=!0,/^1(3|4|5|7|8)\d{9}$/.test(i)?e(".btn-logo").text(i.substring(0,7)+"****"):e(".btn-logo").text(i),e(".supplier_link").removeClass("notlogin"),e(".btn-register").parent(".rightfont").addClass("dn"),e(".btn-leave").parent(".rightfont").removeClass("dn"),e(".pre_login").addClass("dn"),e(".header_navbar-nav").removeClass("dn"),e(".header_navbar-nav .header_dropdown").css("list-style","none").css("list-style-position","inside")):that.loginStat=!1}},URLencode:function(e){return escape(e).replace(/\+/g,"%2B").replace(/\"/g,"%22").replace(/\'/g,"%27").replace(/\//g,"%2F")},setCookie:function(e,t){var i=new Date;i.setTime(i.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()},getCookie:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=decodeURIComponent(document.cookie).match(i))?unescape(t[2]):void 0},IETester:function(e){var t=e||navigator.userAgent;return/msie/i.test(t)?t.match(/msie (\d+\.\d+)/i)[1]:!(!~t.toLowerCase().indexOf("trident")||!~t.indexOf("rv"))&&t.match(/rv:(\d+\.\d+)/)[1]},isLogin:function(){return-1!=window.document.cookie.indexOf("at")},getClientDateTime:function(e){var t={"M+":(new Date).getMonth()+1,"d+":(new Date).getDate(),"H+":(new Date).getHours(),"m+":(new Date).getMinutes(),"s+":(new Date).getSeconds(),"q+":Math.floor(((new Date).getMonth()+3)/3),S:(new Date).getMilliseconds()},i=(new Date).getFullYear(),n=i+"";n=n.length>=4?n:"0000".substr(0,4-n.length)+n,/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n+"").substr(4-RegExp.$1.length)));for(var o in t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e},getRequset:function(){var e=location.search,t=new Object;if(-1!=e.indexOf("?")){var i=e.substr(1);strs=i.split("&");for(var n=0;n<strs.length;n++)t[strs[n].split("=")[0]]=strs[n].split("=")[1]}return t},getRestful:function(){var e=location.pathname,t=[];return-1==e.indexOf("?")&&(t=e.split("/").reverse()),t},parseURIComponent:function(e){return decodeURIComponent(e)},encodeStr:function(e){return encodeURIComponent(e)},HeadTab:function(){if(void 0==e("body").attr("data-header-tab"))return!1;e(".topmiddle .nav-tabs a").each(function(){e(this).attr("data-header-tab")==e("body").attr("data-header-tab")&&e(this).parent().addClass("activefix").siblings().removeClass("activefix")});var t=e(".activefix");if(t.length>0){var i=t.offset().left-e(".topmiddle").offset().left,n=t.width();e(".line").animate({width:n,left:i},200)}else e(".line").animate({width:0},200)},initNavTab:function(){e.fn.navTab=function(){return e(this).on("mouseover mouseout",function(t){var i=null,n=null;i="LI"===t.target.nodeName?t.target:e(t.target).parents("li"),e(i).hasClass("active")||(n=e(i).find("a").attr("href"),1==e(n).length&&(e(i).parent().find(".active").removeClass("active"),e(i).addClass("active"),e(n).parent().find(".active").removeClass("active"),e(n).addClass("active"),t.preventDefault()))}),this},e.fn.fixedNav=function(){for(var t=e(this),n=this.selector,o=t.find("a"),a=0,s=o.length;a<s;++a)e(o[a]).attr("data-index",a);fixedNav=t.clone().addClass("details-nav-fixed"),e("body").append(fixedNav);var c=t.offset().top+t.height(),r=i.calculationNavHeight(e(this).find("a"));e(window).scroll(function(t){if(i.isfixedNavClick)return void(i.isfixedNavClick=!1);var n=e(this).scrollTop();c<=n&&(i.fixedNavShow=!0,e(".details-nav-fixed").css({position:"fixed","z-index":"11",display:"block"}),i.setNavActive(n,r)),c>n&&i.fixedNavShow&&(i.fixedNavShow=!1,e(".details-nav-fixed").css({position:"static","z-index":"-11",display:"none"}),i.setActive(0))}),e(window).scroll(),e(n).on("click",function(t){var n=null;"A"===t.target.nodeName?n=e(t.target).data("index"):"LI"===t.target.nodeName&&(n=e(t.target).find("a").data("index")),null!=n&&(i.isfixedNavClick=!0,i.setActive(n))})}},setActive:function(t){e(".details-nav-fixed").find(".active").removeClass("active"),e(e(".details-nav-fixed").find("a")[t]).parent().addClass("active")},setNavActive:function(e,t){for(var n=0,o=0,a=t.length-1;o<a;++o){if(t[o]<e&&t[o+1]>=e){n=o-1,-1===n&&(n=0);break}if(e>t[a]){n=a-1;break}}i.setActive(n)},calculationNavHeight:function(t){var i=[0];if(t){for(var n=0,o=t.length;n<o;++n){var a=e(t[n]).attr("href");i.push(e(a).offset().top-200)}return i}},isTel:function(e){return!!/^1[34578]\d{9}$/.test(e)},showMsg:function(e,t,i){switch(i){case 1:var n=dialog({content:e,align:"right",quickClose:!0});n.show(document.getElementById(t));break;case 2:var n=dialog({content:e});n.show(),setTimeout(function(){n.close().remove()},3e3)}},getSearchListType:function(){var t;return e("#searchListTab li"),e.each(e("#searchListTab li"),function(i,n){1==e(n).hasClass("active")&&(t=e(n).find("a").attr("data-coun"))}),t},bindWidget:function(){e(".widget-client-display01 .client-display-slick").slick({infinite:!0,slidesToShow:4,slidesToScroll:1}),e(".client-display-slick").slick({infinite:!0,slidesToShow:4,slidesToScroll:1}),e(".J_clientCaseBanner").slick({infinite:!0,slidesToShow:2,slidesToScroll:1});e(".solve").navTab(),e(".widget-hot-cloud .slick").slick({infinite:!0,slidesToShow:3,slidesToScroll:1}),e(".widget-hot-cloud .gallery-item li").on("mouseover mouseout",function(){e(this).parent().find(".gallery-item-active").removeClass("gallery-item-active").find(".gallery-item-app-active").removeClass("gallery-item-app-active"),e(this).addClass("gallery-item-active").find(".gallery-item-app-body").addClass("gallery-item-app-active")}),e(".widget-newhot-cloud .newhot-cloud-ul").slick({infinite:!0,slidesToShow:4,slidesToScroll:1})},htmlEncodeByRegExp:function(e){var t="";return 0==e.length?"":(t=e.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/ /g,"&nbsp;"),t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"))},getBaiduStatic:function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?a8d0cdf0da0ba84b172b8d0927a72b61";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},n={that:this,_check:function(){return"placeholder"in document.createElement("input")},init:function(){this._check()||this.fix()},fix:function(){jQuery(":input[placeholder]").each(function(t,i){var n=e(this),o=n.attr("placeholder");n.wrap(e("<div></div>").css({position:"relative",zoom:"1",border:"none",background:"none",padding:"none",margin:"none"}));var a=n.position(),s=n.outerHeight(!0),c=n.css("padding-left"),r=e("<span></span>").text(o).css({position:"absolute",left:a.left,top:"5px",height:s,lienHeight:s,paddingLeft:c,color:"#aaa"}).appendTo(n.parent());if(e(".searchInput").length>0){var l=that.parseURIComponent(that.getRequset().keyword);"undefined"!=l&&l.length>0&&r.hide()}n.focusin(function(e){r.hide()}).focusout(function(e){n.val()||r.show()}),r.click(function(e){r.hide(),n.focus()})})}};return i.init(),window.getUserData=i.getUserData,n.init(),i});